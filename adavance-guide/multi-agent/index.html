
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://tbice123123.github.io/langchain-dev-utils/adavance-guide/multi-agent/">
      
      
        <link rel="prev" href="../middleware/official/">
      
      
        <link rel="next" href="../graph/">
      
      
        
          <link rel="alternate" href="./" hreflang="en">
        
          <link rel="alternate" href="../../zh/adavance-guide/multi-agent/" hreflang="zh">
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Subagent Tools (Agent as Tool) - Langchain Dev Utils</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Outfit:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Outfit";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sub-agent-tools-agent-as-tool" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Langchain Dev Utils" class="md-header__button md-logo" aria-label="Langchain Dev Utils" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Langchain Dev Utils
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Subagent Tools (Agent as Tool)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="切换到深色模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="切换到深色模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="切换到浅色模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换到浅色模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="./" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../../zh/adavance-guide/multi-agent/" hreflang="zh" class="md-select__link">
              中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/tbice123123/langchain-dev-utils" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    tbice123123/langchain-dev-utils
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started-guide/installation/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../openai-compatible/overview/" class="md-tabs__link">
          
  
  
  Advanced Guides

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api-reference/agent/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../resource/example-project/" class="md-tabs__link">
          
  
  
  Resource

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Langchain Dev Utils" class="md-nav__button md-logo" aria-label="Langchain Dev Utils" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Langchain Dev Utils
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/tbice123123/langchain-dev-utils" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    tbice123123/langchain-dev-utils
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started-guide/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started-guide/chat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chat Model Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started-guide/embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Embedding Model Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started-guide/format/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Formatting Sequences
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started-guide/message/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Message Processing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started-guide/tool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tool Calling Processing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started-guide/human-in-the-loop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Add Human-in-the-Loop Support in Tool Calling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Advanced Guides
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Advanced Guides
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    OpenAI Compatible API Integration
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    OpenAI Compatible API Integration
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openai-compatible/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openai-compatible/chat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating and Using Chat Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openai-compatible/embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Creating and Using Embedding Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../openai-compatible/register/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integration with Model Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Middleware
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Middleware
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../middleware/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../middleware/plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Task Planning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../middleware/router/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Routing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../middleware/handoffs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Handoff
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../middleware/tool-call-repair/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tool Call Repair
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../middleware/format/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Format System Prompts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../middleware/official/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LangChain Built-in Middleware Extensions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Subagent Tools (Agent as Tool)
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Subagent Tools (Agent as Tool)
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-a-single-agent-as-a-tool" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wrapping a Single Agent as a Tool
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wrapping a Single Agent as a Tool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage-example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wrapping-multiple-agents-as-a-single-tool" class="md-nav__link">
    <span class="md-ellipsis">
      
        Wrapping Multiple Agents as a Single Tool
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wrapping Multiple Agents as a Single Tool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage-example_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hook-function-mechanism" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hook Function Mechanism
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Hook Function Mechanism">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-pre_input_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. pre_input_hooks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. pre_input_hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-input-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported Input Types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-signature" class="md-nav__link">
    <span class="md-ellipsis">
      
        Function Signature
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-example_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-post_output_hooks" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. post_output_hooks
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. post_output_hooks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-input-types_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Supported Input Types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-signature_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Function Signature
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage-example_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prebuilt State-Graph Building Functions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Agent Development Module API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/chat_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Chat Model Management Module API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/embeddings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Embedding Model Management Module API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/message_convert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Message Handling Module API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/tool_calling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tool Calling Handling Module API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api-reference/graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    State-Graph Building Functions Module API Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Resource
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Resource
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/example-project/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Example Project
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resource/coding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Use docs programmatically
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="sub-agent-tools-agent-as-tool">Sub-Agent Tools (Agent as Tool)</h1>
<h2 id="overview">Overview</h2>
<p>When building complex AI applications, multi-agent collaboration is a powerful architectural pattern. By assigning different responsibilities to specialized agents, you can achieve professional division of labor and efficient collaboration.</p>
<p>There are multiple ways to implement multi-agent collaboration, and <strong>tool calling</strong> is a common and flexible approach. By encapsulating subagents as tools, a primary agent can dynamically delegate tasks to specialized subagents based on requirements.</p>
<p>This library provides two pre-built functions to simplify this implementation:</p>
<table>
<thead>
<tr>
<th>Function Name</th>
<th>Functional Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>wrap_agent_as_tool</code></td>
<td>Wraps a single agent instance into an independent tool</td>
</tr>
<tr>
<td><code>wrap_all_agents_as_tool</code></td>
<td>Wraps multiple agent instances into a unified tool, specifying which subagent to call via parameters</td>
</tr>
</tbody>
</table>
<h2 id="wrapping-a-single-agent-as-a-tool">Wrapping a Single Agent as a Tool</h2>
<p>Wrapping a single agent requires just three steps:</p>
<ol>
<li>Import <code>wrap_agent_as_tool</code></li>
<li>Pass the agent instance as a parameter</li>
<li>Obtain a tool object that can be directly called by other agents</li>
</ol>
<h3 id="usage-example">Usage Example</h3>
<p>Below, we use a <code>supervisor</code> agent to demonstrate how to wrap subagents as tools using <code>wrap_agent_as_tool</code>.</p>
<p>First, implement two subagents: one for sending emails and one for calendar queries and scheduling.</p>
<p>First, the implementation of the email agent:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">tool</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_dev_utils.chat_models</span><span class="w"> </span><span class="kn">import</span> <span class="n">register_model_provider</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_dev_utils.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_agent</span><span class="p">,</span> <span class="n">wrap_agent_as_tool</span> 

<span class="n">register_model_provider</span><span class="p">(</span>
    <span class="s2">&quot;vllm&quot;</span><span class="p">,</span>
    <span class="s2">&quot;openai-compatible&quot;</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;http://localhost:8000/v1&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="nd">@tool</span>
<span class="k">def</span><span class="w"> </span><span class="nf">send_email</span><span class="p">(</span>
    <span class="n">to</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>  <span class="c1"># Email addresses</span>
    <span class="n">subject</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">body</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">cc</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sends an email via the Email API. Requires correctly formatted addresses.&quot;&quot;&quot;</span>
    <span class="c1"># Stub: In a real application, this would call SendGrid, Gmail API, etc.</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Email sent to </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">to</span><span class="p">)</span><span class="si">}</span><span class="s2"> - Subject: </span><span class="si">{</span><span class="n">subject</span><span class="si">}</span><span class="s2">&quot;</span>


<span class="n">EMAIL_AGENT_PROMPT</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;You are an email assistant.&quot;</span>
    <span class="s2">&quot;Draft professional emails based on natural language requests.&quot;</span>
    <span class="s2">&quot;Extract recipient information and create appropriate subject lines and body content.&quot;</span>
    <span class="s2">&quot;Use send_email to send the email.&quot;</span>
    <span class="s2">&quot;Always confirm what was sent in your final reply.&quot;</span>
<span class="p">)</span>

<span class="n">email_agent</span> <span class="o">=</span> <span class="n">create_agent</span><span class="p">(</span>
    <span class="s2">&quot;vllm:qwen3-4b&quot;</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">send_email</span><span class="p">],</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="n">EMAIL_AGENT_PROMPT</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;email_agent&quot;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<p>And the implementation of the calendar agent:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@tool</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_calendar_event</span><span class="p">(</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">start_time</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>  <span class="c1"># ISO format: &quot;2024-01-15T14:00:00&quot;</span>
    <span class="n">end_time</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>  <span class="c1"># ISO format: &quot;2024-01-15T15:00:00&quot;</span>
    <span class="n">attendees</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>  <span class="c1"># Email addresses</span>
    <span class="n">location</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a calendar event. Requires precise ISO date-time format.&quot;&quot;&quot;</span>
    <span class="c1"># Stub: In a real application, this would call Google Calendar API, Outlook API, etc.</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Event created: </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"> from </span><span class="si">{</span><span class="n">start_time</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">end_time</span><span class="si">}</span><span class="s2"> with </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">attendees</span><span class="p">)</span><span class="si">}</span><span class="s2"> participants&quot;</span>


<span class="nd">@tool</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_available_time_slots</span><span class="p">(</span>
    <span class="n">attendees</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">date</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>  <span class="c1"># ISO format: &quot;2024-01-15&quot;</span>
    <span class="n">duration_minutes</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Queries calendar availability for attendees on a specific date.&quot;&quot;&quot;</span>
    <span class="c1"># Stub: In a real application, this would query a calendar API</span>
    <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;09:00&quot;</span><span class="p">,</span> <span class="s2">&quot;14:00&quot;</span><span class="p">,</span> <span class="s2">&quot;16:00&quot;</span><span class="p">]</span>


<span class="n">CALENDAR_AGENT_PROMPT</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;You are a calendar scheduling assistant.&quot;</span>
    <span class="s2">&quot;Parse natural language scheduling requests (e.g., &#39;next Tuesday afternoon at 2pm&#39;) into the correct ISO date-time format.&quot;</span>
    <span class="s2">&quot;Use get_available_time_slots to check availability when needed.&quot;</span>
    <span class="s2">&quot;Use create_calendar_event to schedule the event.&quot;</span>
    <span class="s2">&quot;Always confirm what was scheduled in your final reply.&quot;</span>
<span class="p">)</span>

<span class="n">calendar_agent</span> <span class="o">=</span> <span class="n">create_agent</span><span class="p">(</span>
    <span class="s2">&quot;vllm:qwen3-4b&quot;</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">create_calendar_event</span><span class="p">,</span> <span class="n">get_available_time_slots</span><span class="p">],</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="n">CALENDAR_AGENT_PROMPT</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;calendar_agent&quot;</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<p>Next, use <code>wrap_agent_as_tool</code> to wrap these two subagents as tools.</p>
<div class="highlight"><pre><span></span><code><span class="n">schedule_event</span> <span class="o">=</span> <span class="n">wrap_agent_as_tool</span><span class="p">(</span>
    <span class="n">calendar_agent</span><span class="p">,</span>
    <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;schedule_event&quot;</span><span class="p">,</span>
    <span class="n">tool_description</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;Schedule calendar events using natural language.&quot;</span>
        <span class="s2">&quot;Use this when the user wants to create, modify, or check calendar appointments.&quot;</span>
        <span class="s2">&quot;Capable of handling date/time parsing, checking available times, and creating events.&quot;</span>
        <span class="s2">&quot;Input: Natural language calendar request (e.g., &#39;meeting with design team next Tuesday at 2pm&#39;)&quot;</span>
    <span class="p">),</span>
<span class="p">)</span>
<span class="n">manage_email</span> <span class="o">=</span> <span class="n">wrap_agent_as_tool</span><span class="p">(</span>
    <span class="n">email_agent</span><span class="p">,</span>
    <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;manage_email&quot;</span><span class="p">,</span>
    <span class="n">tool_description</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;Send emails using natural language.&quot;</span>
        <span class="s2">&quot;Use this when the user wants to send notifications, reminders, or any email communication.&quot;</span>
        <span class="s2">&quot;Capable of extracting recipient information, subject generation, and email drafting.&quot;</span>
        <span class="s2">&quot;Input: Natural language email request (e.g., &#39;send them a meeting reminder&#39;)&quot;</span>
    <span class="p">),</span>
<span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both <code>tool_name</code> and <code>tool_description</code> for <code>wrap_agent_as_tool</code> are optional parameters. If omitted, the tool name defaults to <code>transfer_to_{agent_name}</code>, and the description defaults to <code>This tool transforms input to {agent_name}</code>.<br />
To allow the primary agent to identify and invoke the subagent more accurately, it is recommended to explicitly specify these two items (especially the description) to clearly convey the responsibilities and capabilities of the subagent.</p>
</div>
<p>Finally, create a <code>supervisor_agent</code> that can call these two tools.</p>
<div class="highlight"><pre><span></span><code><span class="n">SUPERVISOR_PROMPT</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;You are a helpful personal assistant.&quot;</span>
    <span class="s2">&quot;You can schedule calendar events and send emails.&quot;</span>
    <span class="s2">&quot;Break down user requests into appropriate tool calls and coordinate the results.&quot;</span>
    <span class="s2">&quot;When a request involves multiple operations, please use multiple tools sequentially.&quot;</span>
<span class="p">)</span>


<span class="n">supervisor_agent</span> <span class="o">=</span> <span class="n">create_agent</span><span class="p">(</span>
    <span class="s2">&quot;vllm:qwen3-4b&quot;</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">schedule_event</span><span class="p">,</span> <span class="n">manage_email</span><span class="p">],</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="n">SUPERVISOR_PROMPT</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span>
    <span class="n">supervisor_agent</span><span class="o">.</span><span class="n">invoke</span><span class="p">({</span><span class="s2">&quot;messages&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">HumanMessage</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="s2">&quot;查询明天的空闲时间&quot;</span><span class="p">)]})</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span>
    <span class="n">supervisor_agent</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
        <span class="p">{</span><span class="s2">&quot;messages&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">HumanMessage</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="s2">&quot;给test@123.com发送邮件会议提醒&quot;</span><span class="p">)]}</span>
    <span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In the example above, we imported <code>create_agent</code> from <code>langchain_dev_utils.agents</code> instead of <code>langchain.agents</code>. This is because this library provides a function with the exact same functionality as the official <code>create_agent</code>, but with the added feature of specifying the model via a string. This allows you to directly use models registered via <code>register_model_provider</code> without needing to initialize a model instance first.</p>
</div>
<h2 id="wrapping-multiple-agents-as-a-single-tool">Wrapping Multiple Agents as a Single Tool</h2>
<p>Wrapping multiple agents into a single tool requires just three steps:</p>
<ol>
<li>Import <code>wrap_all_agents_as_tool</code></li>
<li>Pass multiple agent instances as a list at once</li>
<li>Obtain a unified tool object that can be directly called by other agents</li>
</ol>
<h3 id="usage-example_1">Usage Example</h3>
<p>For the <code>calendar_agent</code> and <code>email_agent</code> from the previous example, we can wrap them into a single tool <code>call_subagent</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">call_subagent_tool</span> <span class="o">=</span> <span class="n">wrap_all_agents_as_tool</span><span class="p">(</span>
    <span class="p">[</span><span class="n">calendar_agent</span><span class="p">,</span> <span class="n">email_agent</span><span class="p">],</span>
    <span class="n">tool_name</span><span class="o">=</span><span class="s2">&quot;call_subagent&quot;</span><span class="p">,</span>
    <span class="n">tool_description</span><span class="o">=</span><span class="p">(</span>
        <span class="s2">&quot;Call subagents to execute tasks.&quot;</span>
        <span class="s2">&quot;Available agents are:&quot;</span>
        <span class="s2">&quot;- calendar_agent: for scheduling calendar events&quot;</span>
        <span class="s2">&quot;- email_agent: for sending emails&quot;</span>
    <span class="p">),</span>
<span class="p">)</span>

<span class="n">MAIN_AGENT_PROMPT</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;You are a helpful personal assistant.&quot;</span>
    <span class="s2">&quot;You can use the **call_subagent** tool to invoke subagents to perform tasks.&quot;</span>
    <span class="s2">&quot;Break down user requests into appropriate tool calls and coordinate the results.&quot;</span>
    <span class="s2">&quot;When a request involves multiple operations, please use multiple tools sequentially.&quot;</span>
<span class="p">)</span>

<span class="n">main_agent</span> <span class="o">=</span> <span class="n">create_agent</span><span class="p">(</span>
    <span class="s2">&quot;vllm:qwen3-4b&quot;</span><span class="p">,</span>
    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">call_subagent_tool</span><span class="p">],</span>
    <span class="n">system_prompt</span><span class="o">=</span><span class="n">MAIN_AGENT_PROMPT</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Both <code>tool_name</code> and <code>tool_description</code> for <code>wrap_all_agents_as_tool</code> are optional parameters. If omitted, the tool name defaults to <code>task</code>, and the description defaults to <code>Launch an ephemeral subagent for a task.\nAvailable agents:\n {available_agents}</code>.<br />
To ensure the primary agent accurately identifies and calls the subagent, it is recommended to explicitly fill in these two items, especially the description, to clearly convey the responsibilities and capabilities of each subagent.</p>
</div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Besides using the <code>wrap_all_agents_as_tool</code> provided by this library to wrap multiple agents into a single tool, you can also use the <code>SubAgentMiddleware</code> provided by the <code>deepagents</code> library to achieve a similar effect.</p>
</div>
<h2 id="hook-function-mechanism">Hook Function Mechanism</h2>
<p>This library includes a flexible hook mechanism that allows you to insert custom logic before and after subagent execution. This mechanism applies to both <code>wrap_agent_as_tool</code> and <code>wrap_all_agents_as_tool</code>. The following explanation uses <code>wrap_agent_as_tool</code> as an example.</p>
<p>The flow of hook function execution is shown in the diagram below:</p>
<pre class="mermaid"><code>graph LR
    Start([Start]) --&gt; InHook{process_input exists?}

    %% --- Input Hook ---
    InHook -- Yes --&gt; DoInHook[Execute process_input]
    InHook -- No --&gt; Raw[Use original request]

    DoInHook --&gt; TypeCheck{Check Return Type}
    Raw --&gt; TypeCheck

    TypeCheck -- String --&gt; BuildDict[Construct dict containing messages]
    TypeCheck -- Dict --&gt; UseDict[Use dict directly]

    BuildDict --&gt; Core
    UseDict --&gt; Core

    %% --- Intermediate Execution ---
    Core([Execute agent.invoke])

    %% --- Output Hook ---
    Core --&gt; OutHook{process_output exists?}

    OutHook -- Yes --&gt; DoOutHook[Execute process_output]
    OutHook -- No --&gt; ExtractContent[Extract text content from&lt;br/&gt;the last item in&lt;br/&gt; response messages]

    DoOutHook --&gt; End([Return Result])
    ExtractContent --&gt; End</code></pre>
<h3 id="1-pre_input_hooks">1. pre_input_hooks</h3>
<p>Preprocess the input before the agent runs. Useful for input enhancement, context injection, format validation, permission checks, etc.</p>
<h4 id="supported-input-types">Supported Input Types</h4>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Single sync function</td>
<td>Used for both synchronous (<code>invoke</code>) and asynchronous (<code>ainvoke</code>) call paths (will not be awaited in async path, called directly)</td>
</tr>
<tr>
<td>Tuple <code>(sync_func, async_func)</code></td>
<td>The first function is for the synchronous call path; the second function (must be <code>async def</code>) is for the asynchronous call path and will be awaited</td>
</tr>
</tbody>
</table>
<h4 id="function-signature">Function Signature</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">pre_input_hook</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">runtime</span><span class="p">:</span> <span class="n">ToolRuntime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        request: Original tool call input</span>
<span class="sd">        runtime: langchain&#39;s ToolRuntime</span>

<span class="sd">    Returns:</span>
<span class="sd">        Processed input, serving as the actual input for the agent (needs to be str or dict)</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<p><strong>Note</strong>:</p>
<ul>
<li>
<p>The return value of the hook function must be str or dict, otherwise a ValueError will be raised.</p>
</li>
<li>
<p>If a dict is returned, it will be used directly as the agent's actual input.</p>
</li>
<li>
<p>If a str is returned, it will be wrapped as <code>HumanMessage(content=...)</code>, ultimately serving as the agent's actual input in the format <code>{"messages": [HumanMessage(content=...)]}</code>.</p>
</li>
<li>
<p>If <code>pre_input_hooks</code> is not provided, the original input is used directly as the agent's actual input in the format <code>{"messages": [HumanMessage(content=request)]}</code>.</p>
</li>
</ul>
<h4 id="usage-example_2">Usage Example</h4>
<p>For example, passing additional session context to the SubAgent to provide more precise task context.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">langchain.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">ToolRuntime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_dev_utils.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">wrap_agent_as_tool</span>


<span class="k">def</span><span class="w"> </span><span class="nf">process_input</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">runtime</span><span class="p">:</span> <span class="n">ToolRuntime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">original_user_message</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
        <span class="n">message</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">runtime</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">message</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="s2">&quot;human&quot;</span>
    <span class="p">)</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;You are assisting with the following user inquiry:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">original_user_message</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="s2">&quot;You have been assigned the following sub-task:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">request</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">prompt</span>


<span class="c1"># Usage</span>
<span class="hll"><span class="n">call_agent_tool</span> <span class="o">=</span> <span class="n">wrap_agent_as_tool</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">pre_input_hooks</span><span class="o">=</span><span class="n">process_input</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="2-post_output_hooks">2. post_output_hooks</h3>
<p>Post-process the complete message list returned by the agent after execution to generate the tool's final return value. Useful for result extraction, structured transformation, etc.</p>
<h4 id="supported-input-types_1">Supported Input Types</h4>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Single function</td>
<td>Used for both synchronous and asynchronous paths (will not be awaited in async path)</td>
</tr>
<tr>
<td>Tuple <code>(sync_func, async_func)</code></td>
<td>The first is for the synchronous path; the second (<code>async def</code>) is for the asynchronous path and will be awaited</td>
</tr>
</tbody>
</table>
<h4 id="function-signature_1">Function Signature</h4>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">post_output_hook</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">runtime</span><span class="p">:</span> <span class="n">ToolRuntime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Command</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        request: Unprocessed original input</span>
<span class="sd">        response: Complete response returned by the agent</span>
<span class="sd">        runtime: langchain&#39;s ToolRuntime</span>

<span class="sd">    Returns:</span>
<span class="sd">        A value that can be serialized to a string, or a Command object</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div>
<p><strong>Note</strong>:</p>
<ul>
<li>
<p>The return value of the hook function must be a value that can be serialized to a string or a <code>Command</code> object.</p>
</li>
<li>
<p>The hook function takes two arguments: <code>request</code> is the unprocessed original input, and <code>response</code> is the complete response returned by the agent (i.e., the return value of <code>agent.invoke(input)</code>).</p>
</li>
<li>
<p>If <code>post_output_hooks</code> is not provided, the agent's final response will be used directly as the tool's return value (i.e., <code>response["messages"][-1].text</code>).</p>
</li>
</ul>
<h4 id="usage-example_3">Usage Example</h4>
<p>For example, adding extra return content for the primary agent.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>

<span class="k">def</span><span class="w"> </span><span class="nf">process_output</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">runtime</span><span class="p">:</span> <span class="n">ToolRuntime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
            <span class="s2">&quot;event_id&quot;</span><span class="p">:</span> <span class="s2">&quot;evt_123&quot;</span><span class="p">,</span>
            <span class="s2">&quot;summary&quot;</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;messages&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>


<span class="c1"># Usage</span>
<span class="hll"><span class="n">call_agent_tool</span> <span class="o">=</span> <span class="n">wrap_agent_as_tool</span><span class="p">(</span><span class="n">agent</span><span class="p">,</span> <span class="n">post_output_hooks</span><span class="o">=</span><span class="n">process_output</span><span class="p">)</span>
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For the <code>wrap_all_agents_as_tool</code> function, if you need to customize <code>pre_input_hooks</code> or <code>post_output_hooks</code> for different subagents, you can call <code>get_subagent_name(runtime)</code> inside the hook to get the current agent name and then process them separately by name.
For example, assume you only need to customize <code>pre_input_hooks</code> for the <code>weather_agent</code> subagent (e.g., adding the current city and time). You can implement it like this:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">langchain_dev_utils.agents.wrap</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_subagent_name</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>

<span class="k">def</span><span class="w"> </span><span class="nf">process_input</span><span class="p">(</span><span class="n">request</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">runtime</span><span class="p">:</span> <span class="n">ToolRuntime</span><span class="p">):</span>
<span class="hll">    <span class="n">subagent_name</span> <span class="o">=</span> <span class="n">get_subagent_name</span><span class="p">(</span><span class="n">runtime</span><span class="p">)</span>
</span>    <span class="k">if</span> <span class="n">subagent_name</span> <span class="o">==</span> <span class="s2">&quot;weather_agent&quot;</span><span class="p">:</span>
        <span class="n">city</span> <span class="o">=</span> <span class="n">runtime</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;city&quot;</span><span class="p">,</span> <span class="s2">&quot;Unknown City&quot;</span><span class="p">)</span>
        <span class="n">time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Current city is: </span><span class="si">{</span><span class="n">city</span><span class="si">}</span><span class="s2">, time is: </span><span class="si">{</span><span class="n">time</span><span class="si">}</span><span class="s2">. Please complete the task based on the above information.&quot;</span> <span class="o">+</span> <span class="n">request</span> 
    <span class="k">return</span> <span class="n">request</span>
</code></pre></div>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.instant", "navigation.tracking", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "content.tabs.link", "content.tooltips", "content.footnote.tooltips", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../assets/javascripts/extra.js"></script>
      
    
  </body>
</html>